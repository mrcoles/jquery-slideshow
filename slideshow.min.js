/*!
 * Slide Show
 *
 * Copyright 2012, Peter Coles - http://mrcoles.com/
 * Licensed under the MIT license.
 * http://mrcoles.com/media/mit-license.txt
 * Date: Fri April 27 20:00:00 2012 -0500
 */(function(a,b){function o(){m=!0,c.addClass("show")}function p(){m=!1,i=j=g=null,c.removeClass("show")}function q(a){a=d.hide();var b=new Image;b.onload=function(){i=b.width,j=b.height,d.attr("height","auto").attr("width","auto").attr("src",g[h]).show(),k=!1,r(),b=null},b.onerror=function(){var a=g[h];t(),b=null,console.log("Error loading img! "+a)},b.src=g[h]}function r(){var a,b,c,e,f=window.innerHeight,g=window.innerWidth;j<=f&&i<=g?k&&(k=!1,e=d[0],e.width="auto",e.height="auto"):(a=f/j,b=g/i,c=a<b?a:b,e=d[0],e.width=i*c,e.height=j*c)}function s(a){return function(b){b&&b.preventDefault(),g&&g.length?(h+=a?-1:1,h<0?h=g.length-1:h>=g.length&&(h=0),q()):p()}}function v(){if(!n){n=!0,c=a("<div>",{id:l,click:function(a){(a.target===this||a.target===d.get(0))&&p()}}).appendTo("body"),d=a("<img>").appendTo(c),e=a("<a>",{"class":"prev",html:"<em>previous</em>",href:"#previous",click:u}).appendTo(c),f=a("<a>",{"class":"prev next",html:"<em>next</em>",href:"#next",click:t}).appendTo(c);var b={27:p,39:t,37:u};a(document).keyup(function(a){m&&b[a.keyCode]&&b[a.keyCode]()}),a(window).resize(function(){m&&j&&i&&(k||j>window.innerHeight||i>window.innerWidth)&&r()})}}var c,d,e,f,g,h,i,j,k,l="slide-show",m=!1,n=!1,t=s(),u=s(!0),w=a.slideShow=function(a,b){a&&a.length&&(v(),g=a,h=b&&b>=0&&b<g.length?b:0,q(!0),o())};a.fn.slideShow=function(c,d){return d===b&&a.isPlainObject(c)&&(d=c,c=b),d=a.extend({elts:"a",dataAttr:null},d),c&&(d.elts=c),this.each(function(){var b=a(this);b.on("click",d.elts,function(c){c.preventDefault();var e=this,f=0,g=b.find(d.elts).map(function(b,c){c===e&&(f=b);var g=d.imgDataAttr?a(c).data(d.imgDataAttr):c.href;return g});w(g,f)})})}})(jQuery);